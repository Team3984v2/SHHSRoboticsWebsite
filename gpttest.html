<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Overlay</title>
    <style>
    #chatbot-overlay {
    position: fixed;
    bottom: 0;
    right: 0;
    width: 300px;
    height: 400px;
    border: 1px solid #ccc;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
}

#chatbot-header {
    background: #007bff;
    color: #fff;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 16px;
}

#chatbot-close {
    background: none;
    border: none;
    color: #fff;
    font-size: 20px;
    cursor: pointer;
}

#chatbot-messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    border-bottom: 1px solid #ccc;
}

#chatbot-input {
    border: none;
    border-top: 1px solid #ccc;
    padding: 10px;
    width: calc(100% - 90px);
    box-sizing: border-box;
}

#chatbot-send {
    border: none;
    background: #007bff;
    color: #fff;
    padding: 10px;
    cursor: pointer;
}
    </style>
</head>
<body>
    <div id="chatbot-overlay">
        <div id="chatbot-header">
            <span>Chat with us!</span>
            <button id="chatbot-close">Ã—</button>
        </div>
        <div id="chatbot-messages"></div>
        <input type="text" id="chatbot-input" placeholder="Type your message...">
        <button id="chatbot-send">Send</button>
    </div>
    <script>
      //const apiKey = 'YOUR_OPENAI_API_KEY'; // Replace with your OpenAI API key
const apiUrl = 'http://100.69.34.2:8080/completion';

document.getElementById('chatbot-send').addEventListener('click', sendMessage);
document.getElementById('chatbot-input').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});
document.getElementById('chatbot-close').addEventListener('click', () => {
    document.getElementById('chatbot-overlay').style.display = 'none';
});

async function sendMessage() {
    const inputElement = document.getElementById('chatbot-input');
    const message = inputElement.value.trim();
    if (message === '') return;

    appendMessage('You', message);
    inputElement.value = '';

    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                //'Authorization': `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                //model: 'gpt-3.5-turbo',
                messages: [{ role: 'user', content: message }],
            })
        });
        
        const data = await response.json();
        const botMessage = data.choices[0].message.content;
        appendMessage('Bot', botMessage);
    } catch (error) {
        console.error('Error:', error);
        appendMessage('Bot', 'Sorry, something went wrong.');
    }
}

function appendMessage(sender, message) {
    const messagesElement = document.getElementById('chatbot-messages');
    const messageElement = document.createElement('div');
    messageElement.classList.add('message');
    messageElement.innerHTML = `<strong>${sender}:</strong> <p>${message}</p>`;
    messagesElement.appendChild(messageElement);
    messagesElement.scrollTop = messagesElement.scrollHeight;
}

    </script>
</body>
</html>
